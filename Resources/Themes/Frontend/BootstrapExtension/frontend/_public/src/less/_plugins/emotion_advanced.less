// Storytelling
.is--invisible {
    visibility: hidden !important;
}

html.is-storytelling,
body.is-storytelling {
    width: 100%;
    height: 100%;
    overflow: hidden;

    &.is-hardware-accelerated {
        .transform-style(preserve-3d);
        .backface-visibility(hidden);
        .translate3d(0; 0; 0);
    }
}

.emotion-storytelling {
    position: relative;
    top: 0;
    left: 0;

    .emotion-video {
        .transform-style(preserve-3d);
        .backface-visibility(hidden);
        .translate3d(0; 0; 0);
    }
}

.emotion-section-nav {
    .unitize-width(40);
    .translate3d(0; -50%; 0);
    position: fixed;
    top: 50%;
    left: 0;
    background: #ffffff;
    border: 1px solid @swf-gray-light;
    z-index: 1500;
    border-radius: @swf-border-radius-base;

    .section-nav-link {
        .unitize-padding(5, 10);
        .unitize(18, 16, line-height);
        .unitize(15, 16, font-size);
        display: block;
        text-align: center;
        color: @swf-gray;

        &.is--active {
            color: @swf-brand-primary;
        }
    }

    .link--section {
        display: none;
    }
}

@media screen and(min-width: @screen-sm-min) {
    .emotion-section-nav {
        .unitize(40, 16, left);

        .link--section {
            display: block;
        }
    }
}

@media screen and(min-width: @screen-hd-min) {
    .emotion-section-nav {
        .section-nav-link:hover {
            color: @swf-brand-primary;
        }
    }
}

// Banner
.emotion-banner {
    .banner-mapping-icon {
        .unitize-width(50);
        .unitize-height(50);
        .unitize(line-height, 50);
        .unitize(font-size, 24);
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        background: rgba(255, 255, 255, 0.8);
        text-align: center;
        color: @swf-gray;
    }
}

@media screen and(min-width: @screen-hd-min) {
    .emotion-banner {
        .banner-mapping-icon:hover {
            color: @swf-brand-primary;
            background: #ffffff;
        }
    }
}

// Article
body.is-storytelling {
    .product-box.box-emotion {
        .title-wrapper a {
            margin-bottom: 0;
        }
        .unit-wrapper {
            display: none;
        }
    }
}

// Quickview
.quick-view-custom {
    .transition(opacity 0.4s cubic-bezier(0, 0, 0.25, 1));
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: -1;
    opacity: 0;

    &.is-active {
        opacity: 1;
        z-index: 6000;
    }
}

.quick-view-content {
    .user-select(none);
    .touch-callout(none);
    width: 100%;
    height: 100%;
    position: absolute;
    opacity: 0;
    visibility: hidden;
    &[data-view="left"], &[data-view="right"] {
        .translate(-50%; -50%);
        opacity: 0;
    }
    &[data-view="left"] {
        left: -20%;
    }
    &[data-view="right"] {
        left: 120%;
    }
    &[data-view="prev"], &[data-view="next"] {
        top: 50%;
        opacity: 1;
        cursor: pointer;
        z-index: 6400;
        visibility: visible;
        &:after {
            .unitize-width(100);
            .unitize-height(100);
            .unitize(font-size, 100);
            .unitize(margin-top, -100);
            .unitize(line-height, 100);
            display: block;
            position: absolute;
            top: 50%;
            font-family: 'FontAwesome';
            font-weight: normal;
            text-align: center;
            opacity: 1;
            vertical-align: middle;
            color: #fff;
        }
    }
    &[data-view="prev"] {
        .translate(-100%; -50%);
        left: 0;
        &:after {
            .unitize(right, -100);
            content: "\f104";
        }
    }
    &[data-view="next"] {
        .translate(0; -50%);
        left: 100%;
        &:after {
            .unitize(left, -100);
            content: "\f105";
        }
    }
    &[data-view="main"] {
        .transition(all 0.4s cubic-bezier(0, 0, 0.25, 1));
        left: 0;
        top: 0;
        z-index: 6300;
        opacity: 1;
        visibility: visible;
        &:after {
            display: block;
            content: "";
            opacity: 0;
        }
    }
}
@media (max-width: @screen-sm-max) {
    .quick-view-content {
        .modal-dialog {
            .unitize(margin-right, 30);
            .unitize(margin-left, 30);
        }
        &[data-view="prev"], &[data-view="next"] {
            &:after {
                .unitize-width(50);
                .unitize-height(50);
                .unitize(font-size, 50);
                .unitize(margin-top, -50);
                .unitize(line-height, 50);
            }
        }
        &[data-view="prev"]:after {
            .unitize(right, -45);
        }
        &[data-view="next"]:after {
            .unitize(left, -40);
        }
    }
}

// Sideview
.emotion--side-view {
    .backface-visibility(hidden);
    .transform-style(preserve-3d);
    .translate3d(0; 0; 0);
    height: 100%;
    width: 100%;
    position: relative;
    overflow: hidden;

    .side-view-banner {
        .translate(-50%; -50%);
        display: block;
        height: 100%;
        width: 100%;
        position: absolute;
        top: 50%;
        left: 50%;
        z-index: 800;
        cursor: pointer;

        &.left.top {
            .translate(0; 0);
            left: 0; 
            top: 0;
        }
        &.left.center {
            .translate(0; -50%);
            left: 0; 
            top: 50%;
        }
        &.left.bottom {
            .translate(0; -100%);
            left: 0; 
            top: 100%;
        }
        &.center.top {
            .translate(-50%; 0);
            left: 50%; 
            top: 0;
        }
        &.center.bottom {
            .translate(-50%; -100%);
            left: 50%; 
            top: 100%;
        }
        &.right.top {
            .translate(-100%; 0);
            left: 100%; 
            top: 0;
        }
        &.right.center {
            .translate(-100%; -50%);
            left: 100%; 
            top: 50%;
        }
        &.right.bottom {
            .translate(-100%; -100%);
            left: 100%; 
            top: 100%;
        }
    }

    .banner-image {
        width: 100%;
    }

    .emotion-mode-rows & {
        height: auto;

        .side-view-banner,
        .side-view-banner.left.top,
        .side-view-banner.left.center,
        .side-view-banner.left.bottom,
        .side-view-banner.center.top,
        .side-view-banner.center.bottom,
        .side-view-banner.right.top,
        .side-view-banner.right.center,
        .side-view-banner.right.bottom {
            .translate(0; 0);
            position: relative;
            left: 0; top: 0;
        }
    }

    .side-view-element {
        .transition(all 0.4s cubic-bezier(0, 0, 0.25, 1));
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 900;
        background: #ffffff;

        &.view-bottom {
            .unitize-height(250);
            width: 100%;
            .translate(0, 100%);
            bottom: 0;
            left: 0;

            .side-view-trigger, .side-view-closer {
                left: 50%;
                border-right: 1px solid @swf-gray-light;
                border-left: 1px solid @swf-gray-light;
            }

            .side-view-trigger {
                border-top: 1px solid @swf-gray-light;
                border-top-right-radius: @swf-border-radius-base;
                border-top-left-radius: @swf-border-radius-base;
                .translate(-50%; -100%);
            }

            .side-view-closer {
                border-bottom: 1px solid @swf-gray-light;
                border-bottom-right-radius: @swf-border-radius-base;
                border-bottom-left-radius: @swf-border-radius-base;
                .translate(-50%; 0);
            }

            &.view-fullsize {
                height: 100%;
                .transform-style(preserve-3d);
                .sideview-slider {
                    .vertical-align();
                }
            }
        }

        &.view-right {
            height: 100%;
            .unitize-max-width(250);
            .translate(100%; 0);
            top: 0;
            right: 0;

            .side-view-trigger, .side-view-closer {
                .unitize(top, 50);
                border-top: 1px solid @swf-gray-light;
                border-bottom: 1px solid @swf-gray-light;
            }
            .side-view-trigger {
                border-left: 1px solid @swf-gray-light;
                border-top-left-radius: @swf-border-radius-base;
                border-bottom-left-radius: @swf-border-radius-base;
                .translate(-100%; 0);
            }
            .side-view-closer {
                border-right: 1px solid @swf-gray-light;
                border-top-right-radius: @swf-border-radius-base;
                border-bottom-right-radius: @swf-border-radius-base;
            }
            .sideview-slider {
                .transform-style(preserve-3d);
                height: 100%;
                .slick-list {
                    .vertical-align();
                }
                .title-wrapper a {
                    .unitize(font-size, 14);
                }
                .slick-prev, .slick-next {
                    .rotate(90deg);
                    left: 45%;
                }
                .slick-prev {
                    .unitize(top, 10);
                }
                .slick-next {
                    bottom: 0;
                    right: auto;
                    top: auto;
                }
            }

            .trigger-icon, .closer-icon {
                .unitize(margin-right, 5)
            }

            &.view-fullsize {
                max-width: none;
                width: 100%;

                .product-box {
                    .product-image {
                        .unitize-height(200);
                    }
                    .product-details {
                        margin: 0;
                    }
                }
            }
        }

        &.view-bottom, &.view-right {
            &.is-active i.trigger-icon {
                .rotate(-180deg);
            }
            
            .sideview-slider {
                margin: 0;
                .unitize(padding, 20);
            }
        }

        &.is-active {
            .translate(0; 0);
            z-index: 901;
        }
    }

    .side-view-trigger, .side-view-closer {
        .unitize-padding(6, 20);
        .transition(all 0.4s cubic-bezier(0, 0, 0.25, 1));
        .user-select(none);
        .touch-callout(none);
        display: block;
        position: absolute;
        color: @swf-gray;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.8);
    }

    .side-view-trigger {
        z-index: 600;
    }
    .side-view-closer {
        z-index: 900;
    }

    .product-box {
        width: 100%;
        height: 100%;
        padding: 0;
        text-align: center;

        .thumbnail {
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .product-image {
            .unitize-height(100);
            margin: 0 auto;
            .label {
                .unitize(font-size, 12);
            }
            img {
                height: 100%;
            }
        }

        .price {
            .unitize(font-size, 16);
        }
    }
}

@media screen and(min-width: @screen-hd-min) {
    .side-view-trigger:hover, .side-view-closer:hover {
        color: @swf-brand-primary;
    }
}
